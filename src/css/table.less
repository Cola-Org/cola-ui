@import (reference) "global";
@import (reference) "items-view";

@tableHeadLineColor: darken(@offWhite, 4%);
@tableFootLineColor: @tableHeadLineColor;
@tableRowLineColor: @tableHeadLineColor;
@tableColLineColor: @tableHeadLineColor;
@tableHeadCellPadding: 0.4em 0.4em;
@tableFootCellPadding: 0.4em 0.4em;
@tableCellPadding: 0.6em 0.4em;

@tableHeadBackground: @white;
@tableFootBackground: @tableHeadBackground;

@tableInvertedStripedBackground: darken(@itemsViewInvertedBackground, 4%);
@tableInvertedHeadBackground: lighten(@itemsViewInvertedBackground, 6%);
@tableInvertedFootBackground: @tableInvertedHeadBackground;
@tableInvertedHeadLineColor: lighten(@tableInvertedHeadBackground, 12%);
@tableInvertedFootLineColor: lighten(@tableInvertedFootBackground, 12%);
@tableInvertedRowLineColor: transparent;
@tableInvertedColLineColor: transparent;

.ui.widget-grid {
	border: 1px solid @borderColor;

	.inner-table {
		display: -webkit-box;
		display: -moz-box;
		display: -ms-flexbox;
		display: -webkit-flex;
		display: flex;

		-webkit-flex-direction: column;
		-ms-flex-direction: column;
		flex-direction: column;

		-webkit-box-orient: vertical;
		-moz-box-orient: vertical;

		overflow: hidden;
		height: 100%;
		border-left: 1px solid @tableColLineColor;

		&:first-of-type {
			border-left-width: 0;
		}

		> .table-header, > .table-footer {
			-webkit-flex: 0 1 auto;
			-ms-flex: 0 1 auto;
			flex: 0 1 auto;
			width: 100%;
			overflow: hidden;
			> table {
				table-layout: fixed;
				width: 0;
			}
		}
		> .table-header {
			border-bottom: 1px solid @tableHeadLineColor;
		}
		> .table-body {
			display: -webkit-box;
			display: -moz-box;
			position: relative;

			-webkit-box-flex: 1;
			-moz-box-flex: 1;
			-webkit-flex: 1 1 auto;
			-ms-flex: 1 1 auto;
			flex: 1 1 auto;

			width: 100%;;

			overflow: auto;
			//overflow: hidden;
			//&:hover {
			//	overflow: auto;
			//}
		}
		> .table-footer {
			border-top: 1px solid @tableFootLineColor;
		}

		.items {
			padding: 0;
			margin: 0;
			overflow: visible;

			.cell-editor-pane {
				position: absolute;
				overflow: hidden;
				background: #fff;

				&.hidden {
					display: none;
				}

				> * {
					width: 100%;
					height: 100%;
				}
				> .editor-container {
					display: flex;

					-webkit-justify-content: center;
					-ms-flex-pack: center;
					justify-content: center;

					-webkit-align-items: center;
					-ms-flex-align: center;
					align-items: center;
				}
			}
		}

		c-input, c-datepicker, c-tag-editor {
			&.in-cell {
				width: 100%;
			}
		}
		.ui.checkbox.in-cell {
			margin-top: 0.25em;
			margin-left: 0.5em;
		}
	}

	.cell, .header-cell, .footer-cell {
		box-sizing: border-box;
		height: 2.4em;
		overflow-x: hidden;
		overflow-y: visible;
		font-size: 1rem;
		> div {
			display: -webkit-box;
			display: -ms-flexbox;
			display: -webkit-flex;
			display: flex;

			height: 100%;
			overflow: hidden;

			-webkit-align-items: center;
			-ms-flex-align: center;
			align-items: center;

			&.default-content, > .cell-content {
				padding: 0 0.4em;
			}
		}

		&.h-left > div {
			-webkit-justify-content: flex-start;
			-ms-flex-pack: start;
			justify-content: flex-start;
		}
		&.h-center > div {
			-webkit-justify-content: center;
			-ms-flex-pack: center;
			justify-content: center;
		}
		&.h-right > div {
			-webkit-justify-content: flex-end;
			-ms-flex-pack: end;
			justify-content: flex-end;
		}

		&.v-top > div {
			-webkit-align-items: flex-start;
			-ms-flex-align: start;
			align-items: flex-start;
		}
		&.v-bottom > div {
			-webkit-align-items: flex-end;
			-ms-flex-align: end;
			align-items: flex-end;
		}
	}
	.header-row {
		.header-cell {
			border-width: 1px 1px 0 0;
			border-style: solid;
			border-color: @tableHeadLineColor @tableColLineColor;
		}
		&:first-child .header-cell {
			border-top-width: 0;
		}
	}
	.footer-cell {
		display: inline-block;
		border-right: 1px solid @tableColLineColor;
	}

	.table.item {
		position: relative;
		white-space: nowrap;
		line-height: 1;
		font-size: 0;
		box-sizing: border-box;
		border-bottom: 1px solid @tableRowLineColor;
		overflow: visible;
		&:last-of-type {
			border-bottom-width: 0;
			.box-shadow(0 1px 0 @tableRowLineColor);
		}
		> .cell {
			display: inline-block;
			border-right: 1px solid @tableColLineColor;
		}
	}
}

.desktop {
	.ui.widget-grid .inner-table {
		.header, .items, .footer {
			display: block;
		}
	}
}

// ---------------------------

.ui.widget-table {
	> .table-wrapper {
		height: 100%;
		overflow: auto;
	}

	table {
		table-layout: fixed;
		width: 100%;
		border-collapse: collapse;
		th, td {
			border-width: 1px;
			border-style: solid;
			border-color: @tableRowLineColor @tableColLineColor;
		}
		thead {
			th {
				font-weight: normal;
				background: @tableHeadBackground;
				border-color: @tableHeadLineColor @tableColLineColor;
				> div {
					position: relative;
					overflow: hidden;
					padding: @tableHeadCellPadding;
				}

				&.sortable > div {
					padding-right: 1.25em;
					&:after {
						content: "\f0dc";
						font-family: Icons;
						position: absolute;
						right: 0.25em;
						top: 0.4em;
						color: @disabledTextColor;
					}
				}

				&.sortable.asc > div:after {
					content: "\f0de";
					color: @darkTextColor;
				}
				&.sortable.desc > div:after {
					content: "\f0dd";
					color: @darkTextColor;
				}
			}
		}
		tbody td {
			position: relative;

			> div {
				overflow: hidden;
				min-height: 1em;
				&.default-content {
					padding: @tableCellPadding;
				}
			}

			&.info {
			}
			&.warn {
				content: "";
				position: absolute;
				right: 0;
				top: 0;
				width: 0;
				height: 0;
				border-left: 0.4em solid transparent;
				border-top: 0.4em solid @warningTextColor;
				border-right: 0.4em solid @warningTextColor;
				border-bottom: 0.4em solid transparent;
				cursor: pointer;
			}
			&.error:after {
				content: "";
				position: absolute;
				right: 0;
				top: 0;
				width: 0;
				height: 0;
				border-left: 0.4em solid transparent;
				border-top: 0.4em solid @errorTextColor;
				border-right: 0.4em solid @errorTextColor;
				border-bottom: 0.4em solid transparent;
				cursor: pointer;
			}

			.state {
				font-family: "Icons";
				&.new {
					.opacity(50);
					&:before {
						content: "\f067";
					}
				}
				&.modified {
					.opacity(50);
					&:before {
						content: "\f040";
					}
				}
				&.info {
					color: @infoTextColor;
					&:before {
						content: "\f05a";
					}
				}
				&.warn {
					color: @warningTextColor;
					&:before {
						content: "\f06a";
					}
				}
				&.error {
					color: @errorTextColor;
					&:before {
						content: "\f071";
					}
				}
			}
		}
		thead tr:first-child th {
			border-bottom: 2px solid @tableHeadLineColor;
		}
		tbody tr:last-child td {
			border-bottom: 2px solid @tableFootLineColor;
		}
		tfoot {
			td {
				background: @tableFootBackground;
				border-color: @tableFootLineColor @tableColLineColor;
				> div {
					overflow: hidden;
					padding: @tableFootCellPadding;
				}
			}
		}

		c-input, c-datepicker, c-tag-editor {
			&.in-cell {
				width: 100%;
			}
		}

		.ui.checkbox.in-cell {
			margin-top: 0.25em;
			margin-left: 0.5em;
		}
	}

	> .fixed-header, > .fixed-footer {
		overflow: hidden;
		height: auto !important;
		position: absolute;
		display: none;
	}

	> .fixed-header {
		top: 0;
	}

	> .fixed-footer {
		bottom: 0;
	}
}

.ui.widget-table.impact {
	table {
		th, td {
			> div {
				padding: 0.25em !important;
			}
		}
	}
}

.ui.widget-table.striped {
	.table.item:nth-child(2n):not(.current) {
		background: @itemsViewItemStripedBackground;
	}
}

.ui.widget-table {
	.table.item:hover:not(.current) {
		background: @itemsViewHoverBackground;
	}
	.table.item.current {
		background: @itemsViewCurrentBackground;
	}
}

.ui.widget-table.striped.inverted {
	.table.item:nth-child(2n):not(.current) {
		background: @tableInvertedStripedBackground;
	}
}

.ui.widget-table.inverted {
	background: @itemsViewInvertedBackground;
	.table.item {
		color: @itemsViewInvertedTextColor;
		background: @itemsViewInvertedBackground;
		&:hover:not(.current) {
			background: @itemsViewInvertedHoverBackground;
		}
		&.current {
			background: @itemsViewInvertedCurrentBackground;
		}
	}
	table {
		color: @itemsViewInvertedTextColor;
		th, td {
			border-color: @tableInvertedRowLineColor @tableInvertedColLineColor;
		}
		thead th {
			background: @tableInvertedHeadBackground;
			border-color: @tableInvertedHeadLineColor;
		}
		thead tr:last-child th {
			border-bottom-color: @tableInvertedFootLineColor;
		}
		tbody tr:last-child td {
			border-bottom-color: @tableInvertedFootLineColor;
		}
		tfoot td {
			background: @tableInvertedFootBackground;
			border-color: @tableInvertedFootLineColor;
		}
	}
}

.ui.widget-table.basic {
	background: none;
	.table.item {
		color: inherit;
		background: none;
		&:hover:not(.current) {
			background: none;
		}
		&.current {
			background: none;
			color: inherit;
		}
	}
}

.table-light-color(@color) {
	.ui.widget-table.light-@{color} {
		.table.item:hover:not(.current) {
			background: fade(@@color, 10%);
		}
		.table.item.current {
			background: fade(@@color, 20%);
		}
	}
}

//.table-light-color(red);
//.table-light-color(orange);
//.table-light-color(yellow);
//.table-light-color(olive);
//.table-light-color(green);
//.table-light-color(teal);
//.table-light-color(blue);
//.table-light-color(violet);
//.table-light-color(purple);
//.table-light-color(pink);
//.table-light-color(brown);
//.table-light-color(grey);
//.table-light-color(black);

.table-color(@color) {
	.ui.widget-table.@{color} {
		.table.item:hover:not(.current) {
			background: fade(@@color, 12%);
		}
		.table.item.current {
			background: @@color;
			color: @invertedSelectedTextColor;
		}
	}
}

//.table-color(red);
//.table-color(orange);
//.table-color(yellow);
//.table-color(olive);
//.table-color(green);
//.table-color(teal);
//.table-color(blue);
//.table-color(violet);
//.table-color(purple);
//.table-color(pink);
//.table-color(brown);
//.table-color(grey);
//.table-color(black);